"use strict";var cov=cov||{},gridponent;cov.covered=[];cov.cover=function(n){cov.covered[n]=!0;cov.callout&&cov.callout(n)};gridponent=gridponent||function(n,t){var i,r,u;if(cov.cover(1),typeof n=="string"&&(cov.cover(2),n=document.querySelector(n)),n instanceof HTMLElement)return(cov.cover(3),i=n.querySelector(".table-container"),i&&i.api)?i.api:(r=new gridponent.Initializer(n),u=r.initializeOptions(t),u.node.api);cov.cover(4);throw new Error("Could not resolve selector: "+n.toString());},function(n){n.events={rowSelected:"rowselected",beforeInit:"beforeinit",beforeRead:"beforeread",beforeEdit:"beforeedit",onRead:"onread",onEdit:"onedit",editReady:"editready",httpError:"httpError",ready:"ready"};n.api=function(n){cov.cover(5);this.controller=n;this.config=n.config;this.$n=$(this.config.node)};n.api.prototype={create:function(n){return cov.cover(6),this.controller.addRow(n),this},destroy:function(n,t){return cov.cover(7),this.controller.deleteRow(n,t,!0),this},dispose:function(){return cov.cover(8),this.controller.dispose(),this},find:function(n){return cov.cover(9),this.$n.find(n).addBack(n)},getData:function(n){return(cov.cover(10),n!=undefined)?this.config.map.get(n):this.controller.config.pageModel.data},getTableRow:function(t){return cov.cover(11),n.getTableRow(this.controller.config.map,t,this.controller.config.node)},read:function(n,t){return cov.cover(12),this.controller.read(n,t),this},refresh:function(n){return cov.cover(13),this.controller.read(null,n),this},saveChanges:function(n,t){return cov.cover(14),this.controller.updateRow(n,t),this},search:function(t,i){return cov.cover(15),t=n.isNullOrEmpty(t)?"":t.toString(),this.controller.search(t,i),this},sort:function(t,i,r){return cov.cover(16),t=n.isNullOrEmpty(t)?"":t.toString(),i=typeof i=="boolean"?i:i==="false"?!1:!!i,this.controller.sort(t,i,r),this},toggleBusy:function(n){return cov.cover(17),n=n===!0||n===!1?n:!this.$n.hasClass("busy"),n?(cov.cover(18),this.$n.addClass("busy")):(cov.cover(19),this.$n.removeClass("busy")),this}};Object.getOwnPropertyNames(n.events).forEach(function(t){cov.cover(20);n.api.prototype[t]=function(i){return cov.cover(21),typeof i=="function"&&(cov.cover(22),this.controller.addDelegate(n.events[t],i)),this}});n.api.prototype.ready=function(n){return cov.cover(23),this.controller.ready(n),this};n.api.prototype.rowSelected=function(t){return cov.cover(24),typeof t=="function"&&(cov.cover(25),this.controller.addDelegate(n.events.rowSelected,t),this.$n.addClass("selectable")),this};n.Controller=function(n,t,i,r){cov.cover(26);this.config=n;this.model=t;this.$n=$(n.node);this.requestModel=i;this.injector=r;n.pager&&(cov.cover(27),this.requestModel.top=25);this.handlers={readHandler:this.read.bind(this),commandHandler:this.commandHandler.bind(this),rowSelectHandler:this.rowSelectHandler.bind(this),httpErrorHandler:this.httpErrorHandler.bind(this),toolbarChangeHandler:this.toolbarChangeHandler.bind(this),toolbarEnterKeyHandler:this.toolbarEnterKeyHandler.bind(this)};this.done=!1;this.eventDelegates={};this.addBusyDelegates()};n.Controller.prototype={init:function(){cov.cover(28);var t=this;this.addCommandHandlers(this.config.node);this.addRowSelectHandler(this.config);this.addRefreshEventHandler(this.config);this.addToolbarChangeHandler();this.done=!0;this.invokeDelegates(n.events.ready,this.config.node.api)},addBusyDelegates:function(){cov.cover(29);this.addDelegate(n.events.beforeRead,this.addBusy);this.addDelegate(n.events.onRead,this.removeBusy);this.addDelegate(n.events.beforeEdit,this.addBusy);this.addDelegate(n.events.onEdit,this.removeBusy);this.addDelegate(n.events.httpError,this.removeBusy)},addBusy:function(){cov.cover(30);this.$n.addClass("busy")},removeBusy:function(){cov.cover(31);this.$n.removeClass("busy")},ready:function(t){cov.cover(32);this.done?(cov.cover(33),n.applyFunc(t,this.config.node.api,this.config.node.api)):(cov.cover(34),this.addDelegate(n.events.ready,t))},addDelegate:function(n,t){cov.cover(35);this.eventDelegates[n]=this.eventDelegates[n]||[];this.eventDelegates[n].push(t)},invokeDelegates:function(t,i){cov.cover(36);var f=this,r=!0,u=this.eventDelegates[t];return Array.isArray(u)&&(cov.cover(37),u.forEach(function(t){(cov.cover(38),r!==!1)&&(r=n.applyFunc(t,f.config.node.api,i))})),r},addToolbarChangeHandler:function(){cov.cover(39);var n=".table-toolbar [name], thead input, .table-pager input";this.$n.on("change",n,this.handlers.toolbarChangeHandler);this.$n.on("keydown",n,this.handlers.toolbarEnterKeyHandler)},removeToolbarChangeHandler:function(){cov.cover(40);this.$n.off("change",this.handlers.toolbarChangeHandler);this.$n.off("keydown",this.handlers.toolbarEnterKeyHandler)},toolbarEnterKeyHandler:function(n){if(cov.cover(41),n.keyCode==13){cov.cover(42);n.target.blur();return}},toolbarChangeHandler:function(t){cov.cover(43);var i=t.target.name,r=this.config.pageModel,u=n.getType(r[i]),f=n.ModelSync.cast(t.target.value,u);r[i]=f;this.read()},addCommandHandlers:function(n){cov.cover(44);$(n).on("click","button[value],a[value]",this.handlers.commandHandler)},removeCommandHandlers:function(n){cov.cover(45);$(n).off("click",this.handlers.commandHandler)},commandHandler:function(t){var c,o;cov.cover(46);var s,u=$(t.currentTarget),f=u.closest("tr[data-uid],div.modal",this.config.node),e=f.length?this.config.map.get(f[0]):null,h=u.attr("value"),r=n.getCommand(this.config.columns,h),i=this.config.pageModel;if(t.stopPropagation(),r&&typeof r.func=="function"){cov.cover(47);r.func.call(this.config.node.api,e);return}s=(h||"").toLowerCase();switch(s){case"addrow":cov.cover(48);this.addRow();break;case"edit":cov.cover(49);this.editRow(e,f);break;case"delete":cov.cover(50);case"destroy":cov.cover(51);this.deleteRow(e,f);break;case"page":cov.cover(52);c=u.attr("data-page");i.page=parseInt(c);this.read();break;case"search":cov.cover(53);i.search=this.$n.find(".table-toolbar input[name=search]").val();this.read();break;case"sort":cov.cover(54);o=u.attr("data-sort");i.sort===o?(cov.cover(55),i.desc=!i.desc):(cov.cover(56),i.sort=o,i.desc=!1);this.read();break;default:cov.cover(57);r=n.getObjectAtPath(u.val());typeof r=="function"&&(cov.cover(58),r.call(this.config.node.api,e))}},getEditor:function(t){cov.cover(59);var r=this,i;return t==undefined?(cov.cover(60),i=new n.Editor(this.config,this.model,this.injector)):t=="modal"?(cov.cover(61),i=new n.ModalEditor(this.config,this.model,this.injector)):(cov.cover(62),i=new n.TableRowEditor(this.config,this.model,this.injector)),i.beforeEdit=function(t){cov.cover(63);r.invokeDelegates(n.events.beforeEdit,t)},i.afterEdit=function(t){cov.cover(64);r.invokeDelegates(n.events.onEdit,t)},i.editReady=function(t){cov.cover(65);r.invokeDelegates(n.events.editReady,t)},i},addRowSelectHandler:function(){cov.cover(66);this.$n.on("click","div.table-body > table > tbody > tr > td.body-cell",this.handlers.rowSelectHandler)},removeRowSelectHandler:function(){cov.cover(67);this.$n.off("click",this.handlers.rowSelectHandler)},rowSelectHandler:function(t){cov.cover(68);var i=this.config,f=$(t.target).closest("tr",i.node),o=this.$n.find("div.table-body > table > tbody > tr.selected"),r=typeof i.rowselected,u,e;(r==="string"&&i.rowselected.indexOf("{{")!==-1&&(r="urlTemplate"),o.removeClass("selected"),$(f).addClass("selected"),u=i.map.get(f),e=this.invokeDelegates(n.events.rowSelected,u),e!==!1)&&r==="urlTemplate"&&(cov.cover(69),window.location=n.supplant.call(this.config.node.api,i.rowselected,u))},addRefreshEventHandler:function(n){if(cov.cover(70),n.refreshevent){cov.cover(71);$(document).on(n.refreshevent,this.handlers.readHandler)}},removeRefreshEventHandler:function(n){cov.cover(72);n.refreshevent&&(cov.cover(73),$(document).off(n.refreshevent,this.handlers.readHandler))},search:function(n,t){cov.cover(74);this.config.pageModel.search=n;this.$n.find("div.table-toolbar input[name=search]").val(n);this.read(null,t)},sort:function(n,t,i){cov.cover(75);this.config.pageModel.sort=n;this.config.pageModel.desc=t==!0;this.read(null,i)},read:function(t,i){cov.cover(76);var r=this,u=!0;(t&&(cov.cover(77),n.shallowCopy(t,this.config.pageModel)),u=this.invokeDelegates(n.events.beforeRead,this.config.node.api),u!==!1)&&this.model.read(this.config.pageModel,function(t){cov.cover(78);try{n.shallowCopy(t,r.config.pageModel,!0);r.injector.setResource("$data",r.config.pageModel.data);r.config.map.clear();n.resolveTypes(r.config);r.refresh(r.config);r.invokeDelegates(n.events.onRead,r.config.node.api);n.applyFunc(i,r.config.node,r.config.pageModel)}catch(u){r.removeBusy();r.httpErrorHandler(u)}},this.handlers.httpErrorHandler)},addRow:function(n){cov.cover(79);var t=this.getEditor(this.config.editmode),i=t.add(n);return t},editRow:function(n,t){cov.cover(80);var i=this.getEditor(this.config.editmode),r=i.edit(n,t);return i},updateRow:function(t,i){cov.cover(81);try{var r=this,u=this.getEditor(),f;if(!n.hasValue(this.config.update)){cov.cover(82);n.applyFunc(i,r.config.node);return}u.edit(t);u.save(function(u){cov.cover(83);f=n.getTableRow(r.config.map,t,r.$n[0]);f&&(cov.cover(84),r.refresh());typeof i=="function"&&(cov.cover(85),n.applyFunc(i,r,u))},this.httpErrorHandler.bind(this))}catch(e){this.removeBusy();this.httpErrorHandler(e)}},deleteRow:function(t,i,r){cov.cover(86);try{if(!n.hasValue(this.config.destroy)){cov.cover(87);n.applyFunc(i,this.config.node);return}var u=this,e=r||confirm("Are you sure you want to delete this item?"),f=n.getTableRow(this.config.map,t,this.$n[0]);if(!e){cov.cover(88);n.applyFunc(i,this.config.node);return}this.invokeDelegates(n.events.beforeEdit,{type:"destroy",dataItem:t,elem:f});this.model.destroy(t,function(r){cov.cover(89);try{if(!r||!r.errors){cov.cover(90);var e=u.config.pageModel.data.indexOf(t);e!=-1&&(cov.cover(91),u.config.pageModel.data.splice(e,1));u.refresh(u.config)}}catch(o){n.error(o)}u.invokeDelegates(n.events.onEdit,{type:"destroy",dataItem:t,elem:f});n.applyFunc(i,u.config.node.api,r)},u.handlers.httpErrorHandler)}catch(o){this.removeBusy();this.httpErrorHandler(o)}},refresh:function(){cov.cover(92);try{var t=this.$n.find("div.table-body"),i=this.$n.find("div.table-footer"),r=this.$n.find("div.table-pager");this.config.map.clear();t.html(this.injector.exec("tableBody"));i.html(this.injector.exec("footerTable"));r.html(this.injector.exec("pagerBar"));n.helpers.sortStyle(this.config)}catch(u){n.error(u)}},httpErrorHandler:function(t){cov.cover(93);this.invokeDelegates(n.events.httpError,t);alert("An error occurred while carrying out your request.");n.error(t)},dispose:function(){cov.cover(94);this.removeRefreshEventHandler(this.config);this.removeRowSelectHandler();this.removeCommandHandlers(this.config.node);this.removeToolbarChangeHandler()}};n.DataLayer=function(n){cov.cover(95);this.config=n;this.reader=null};n.DataLayer.prototype={getReader:function(){cov.cover(96);var t=n.getType(this.config.read);switch(t){case"string":return cov.cover(97),new n.ServerPager(this.config.read);case"function":return cov.cover(98),new n.FunctionPager(this.config);case"object":if(cov.cover(99),n["implements"](this.config.read,n.PagingModel.prototype))return cov.cover(100),this.config.pageModel=this.config.read,new n.ClientPager(this.config);throw"Unsupported read configuration";case"array":return cov.cover(101),this.config.pageModel.data=this.config.read,new n.ClientPager(this.config);default:cov.cover(102);throw"Unsupported read configuration";}},read:function(t,i,r){cov.cover(103);var u=this;this.reader||(cov.cover(104),this.reader=this.getReader());this.reader.read(t,function(t){cov.cover(105);t=u.resolveResult(t);n.applyFunc(i,u,[t])},function(t){n.applyFunc(r,u,[t])})},create:function(t,i,r){var u,f,e;cov.cover(106);u=this;typeof this.config.create=="function"?(cov.cover(107),n.applyFunc(this.config.create,this.config.node.api,[t,i,r],r)):(cov.cover(108),f=n.supplant(this.config.create,t),e=new n.Http,e.post(f,t,function(t){n.applyFunc(i,u,t)},function(t){n.applyFunc(r,u,t)}))},update:function(t,i,r){var u,f,e;cov.cover(109);u=this;typeof this.config.update=="function"?(cov.cover(110),n.applyFunc(this.config.update,this.config.node.api,[t,i,r],r)):(cov.cover(111),f=n.supplant(this.config.update,t),e=new n.Http,e.post(f,t,function(t){n.applyFunc(i,u,t)},function(t){n.applyFunc(r,u,t)}))},destroy:function(t,i,r){var u,f,e;cov.cover(112);u=this;typeof this.config.destroy=="function"?(cov.cover(113),n.applyFunc(this.config.destroy,this.config.node.api,[t,i,r],r)):(cov.cover(114),f=n.supplant(this.config.destroy,t),e=new n.Http,e.destroy(f,function(t){n.applyFunc(i,u,t)},function(t){n.applyFunc(r,u,t)}))},resolveResult:function(t){return(cov.cover(115),n.hasValue(t)&&Array.isArray(t))?(cov.cover(116),new n.PagingModel(t)):t}};n.DataMap=function(){cov.cover(117);this.uid=0;this.map={}};n.DataMap.prototype={assign:function(n,t){cov.cover(118);var i=++this.uid;return this.map[i]=n,t&&t.setAttribute&&(cov.cover(119),t.setAttribute("data-uid",i.toString())),i},get:function(n){cov.cover(120);var t=this.resolveUid(n);return this.map[t]},getUid:function(n){var i,r,t;for(cov.cover(121),r=Object.getOwnPropertyNames(this.map),t=0;t<r.length;t++)if(i=r[t],this.map[i]===n)return i;return-1},resolveUid:function(n){cov.cover(122);var t=-1;return($.isNumeric(n)?(cov.cover(123),t=parseInt(n)):(cov.cover(124),n=$(n).closest("[data-uid]"),n.length===1&&(cov.cover(125),t=parseInt($(n).attr("data-uid")))),isNaN(t))?-1:t},remove:function(n){cov.cover(126);var t=this.resolveUid(n);t in this.map&&(cov.cover(127),delete this.map[t])},clear:function(){cov.cover(128);this.uid=0;this.map={}}};n.Editor=function(n,t,i){cov.cover(129);this.config=n;this.dal=t;this.uid=null;this.dataItem=null;this.originalDataItem=null;this.mode=null;this.beforeEdit=null;this.afterEdit=null;this.editReady=null;this.button=null;this.$n=$(n.node);this.injector=i};n.Editor.prototype={add:function(n){return cov.cover(130),this.dataItem=n||this.createDataItem(),this.mode="create",this.injector.setResource("$dataItem",this.dataItem).setResource("$mode",this.mode),this.config.pageModel.data.push(this.dataItem),this.uid=this.config.map.assign(this.dataItem),{dataItem:this.dataItem,uid:this.uid}},edit:function(t){return cov.cover(131),this.dataItem=t,this.mode="update",this.setInjectorContext(),this.originalDataItem=n.shallowCopy(t),{dataItem:t}},cancel:function(){if(cov.cover(132),this.setInjectorContext(),this.mode==="create"){cov.cover(133);this.config.map.remove(this.uid);var t=this.config.pageModel.data.indexOf(this.dataItem);t!==-1&&(cov.cover(134),this.config.pageModel.data.slice(t,1))}else this.mode=="update"&&this.originalDataItem&&(cov.cover(135),n.shallowCopy(this.originalDataItem,this.dataItem));this.removeCommandHandler()},httpErrorHandler:function(t){cov.cover(136);alert("An error occurred while carrying out your request.");n.error(t)},save:function(t,i){cov.cover(137);var r=this,u,f,i=i||n.error;this.setInjectorContext();this.addBusy();this.elem&&(cov.cover(138),f=n.ModelSync.serialize(this.elem),n.ModelSync.castValues(f,this.config.columns),n.shallowCopy(f,this.dataItem));typeof this.beforeEdit=="function"&&(cov.cover(139),this.beforeEdit({type:this.mode,dataItem:this.dataItem,elem:this.elem}));this.mode=="create"?(cov.cover(140),this.dal.create(this.dataItem,function(f){cov.cover(141);try{r.injector.setResource("$mode",null);n.hasValue(f.errors)?(cov.cover(142),r.validate(f)):(cov.cover(143),u=n.hasValue(f.dataItem)?f.dataItem:f.data&&f.data.length?f.data[0]:n["implements"](f,r.dataItem)?f:r.dataItem,n.shallowCopy(u,r.dataItem,!0),r.updateUI(r.config,r.dataItem,r.elem),r.removeCommandHandler&&r.removeCommandHandler())}catch(e){var o=i||n.error;o(e)}r.button instanceof HTMLElement&&n.enable(r.button);r.removeBusy();typeof r.afterEdit=="function"&&(cov.cover(144),r.afterEdit({type:r.mode,dataItem:r.dataItem,elem:r.elem}));n.applyFunc(t,r.config.node.api,f)},function(t){cov.cover(145);r.removeBusy();n.applyFunc(i,r,t)})):(cov.cover(146),this.dal.update(this.dataItem,function(f){cov.cover(147);try{r.injector.setResource("$mode",null);n.hasValue(f.errors)?(cov.cover(148),r.validate(f)):(cov.cover(149),u=n.hasValue(f.dataItem)?f.dataItem:f.data&&f.data.length?f.data[0]:n["implements"](f,r.dataItem)?f:r.dataItem,n.shallowCopy(u,r.dataItem,!0),r.elem&&(cov.cover(150),r.updateUI(r.config,r.dataItem,r.elem),r.removeCommandHandler&&r.removeCommandHandler()))}catch(e){i(e)}r.button instanceof HTMLElement&&n.enable(r.button);r.removeBusy();typeof r.afterEdit=="function"&&(cov.cover(151),r.afterEdit({type:r.mode,dataItem:r.dataItem,elem:r.elem}));n.applyFunc(t,r.config.node,f)},function(t){cov.cover(152);r.removeBusy();n.applyFunc(i,r,t)}))},addBusy:function(){cov.cover(153);this.$n.addClass("busy")},removeBusy:function(){cov.cover(154);this.$n.removeClass("busy")},updateUI:function(){},validate:function(){},createDataItem:function(){cov.cover(155);var t={};return this.config.columns.forEach(function(i){cov.cover(156);var r=i.field||i.sort;n.hasValue(r)&&(cov.cover(157),n.hasValue(i.Type)?(cov.cover(158),t[r]=n.getDefaultValue(i.Type)):(cov.cover(159),t[r]=""))}),typeof this.config.model=="object"&&(cov.cover(160),n.shallowCopy(this.config.model,t)),t},setInjectorContext:function(){cov.cover(161);this.injector.setResource("$dataItem",this.dataItem).setResource("$mode",this.mode)}};n.TableRowEditor=function(t,i,r){cov.cover(162);var u=this;n.Editor.call(this,t,i,r);this.elem=null;this.commandHandler=function(t){cov.cover(163);var i=$(this).val();/^(create|update|save)$/i.test(i)?(cov.cover(164),u.button=t.target,n.disable(u.button,5),u.save(null,u.httpErrorHandler)):/^cancel$/i.test(i)&&u.cancel()}};n.TableRowEditor.prototype={save:n.Editor.prototype.save,addBusy:n.Editor.prototype.addBusy,removeBusy:n.Editor.prototype.removeBusy,httpErrorHandler:n.Editor.prototype.httpErrorHandler,createDataItem:n.Editor.prototype.createDataItem,setInjectorContext:n.Editor.prototype.setInjectorContext,addCommandHandler:function(){cov.cover(165);$(this.elem).on("click","button[value]",this.commandHandler)},removeCommandHandler:function(){cov.cover(166);$(this.elem).off("click",this.commandHandler)},add:function(t){cov.cover(167);var i=this.$n.find("div.table-body > table > tbody"),r=n.Editor.prototype.add.call(this,t);return this.elem=$(this.injector.exec("tableRow",r.uid)),n.ModelSync.bindElements(this.dataItem,this.elem),this.addCommandHandler(),this.config.newrowposition==="top"?(cov.cover(168),i.prepend(this.elem)):(cov.cover(169),i.append(this.elem)),typeof this.elem[0].scrollIntoView=="function"&&this.elem[0].scrollIntoView(),this.invokeEditReady(),this.injector.setResource("$mode",null),{dataItem:this.dataItem,elem:this.elem}},edit:function(t,i){cov.cover(170);var r;return n.Editor.prototype.edit.call(this,t),this.elem=i,this.addCommandHandler(),r=this.injector.exec("tableRowCells"),$(i).addClass("update-mode").empty().append(r),n.ModelSync.bindElements(t,this.elem),this.invokeEditReady(),this.injector.setResource("$mode",null),{dataItem:t,elem:this.elem}},cancel:function(){cov.cover(171);n.Editor.prototype.cancel.call(this);try{var i=$(this.elem).closest("table",this.$n);$(this.elem).hasClass("create-mode")?(cov.cover(172),$(this.elem).remove()):(cov.cover(173),this.updateUI())}catch(t){n.error(t)}},validate:function(t){if(cov.cover(174),typeof this.config.validate=="function")cov.cover(175),n.applyFunc(this.config.validate,this,[this.elem,t]);else{cov.cover(176);var r=this,i=new n.StringBuilder,u;i.add("Please correct the following errors:\r\n");$(r.elem).find("[name].error").removeClass("error");Object.getOwnPropertyNames(t.errors).forEach(function(n){cov.cover(177);$(r.elem).find('[name="'+n+'"]').addClass("error");u=t.errors[n].errors;i.add(n+":\r\n").add(u.map(function(n){return"    - "+n+"\r\n"}).join(""))});alert(i.toString())}},updateUI:function(){cov.cover(178);var n;this.injector.setResource("$mode","read");n=this.injector.exec("tableRowCells");$(this.elem).removeClass("update-mode create-mode").empty().append(n)},invokeEditReady:function(){cov.cover(179);typeof this.editReady=="function"&&(cov.cover(180),this.editReady({dataItem:this.dataItem,elem:this.elem}))}};n.ModalEditor=function(t,i,r){cov.cover(181);n.TableRowEditor.call(this,t,i,r)};n.ModalEditor.prototype={save:n.Editor.prototype.save,addBusy:n.Editor.prototype.addBusy,removeBusy:n.Editor.prototype.removeBusy,httpErrorHandler:n.Editor.prototype.httpErrorHandler,addCommandHandler:n.TableRowEditor.prototype.addCommandHandler,removeCommandHandler:n.TableRowEditor.prototype.removeCommandHandler,validate:n.TableRowEditor.prototype.validate,createDataItem:n.Editor.prototype.createDataItem,setInjectorContext:n.Editor.prototype.setInjectorContext,invokeEditReady:n.TableRowEditor.prototype.invokeEditReady,add:function(t){cov.cover(182);var r=this,u,i;n.Editor.prototype.add.call(this,t);u=this.injector.exec("bootstrapModal");i=$(u).appendTo(this.config.node).one("shown.bs.modal",function(){cov.cover(183);r.addCommandHandler();r.invokeEditReady()});this.elem=i[0];i.modal({show:!0,keyboard:!0,backdrop:"static"});n.ModelSync.bindElements(this.dataItem,this.elem);i.one("hidden.bs.modal",function(){cov.cover(184);$(i).remove()});return{dataItem:this.dataItem,elem:this.elem}},edit:function(t){cov.cover(185);var r=this,u,i;n.Editor.prototype.edit.call(this,t);u=this.injector.exec("bootstrapModal");i=$(u).appendTo(this.config.node).one("shown.bs.modal",r.invokeEditReady.bind(r));this.elem=i[0];i.modal({show:!0,keyboard:!0,backdrop:"static"});n.ModelSync.bindElements(t,this.elem);i.one("hidden.bs.modal",function(){cov.cover(186);$(i).remove()});return this.addCommandHandler(),{dataItem:t,elem:this.elem}},cancel:function(){cov.cover(187);n.Editor.prototype.cancel.call(this);$(this.elem).modal("hide")},updateUI:function(){cov.cover(188);var i,r,t,u,f;$(this.elem).modal("hide");t=this.injector.exec("tableRow");this.mode=="create"?(cov.cover(189),i=this.$n.find("div.table-body > table > tbody"),this.config.newrowposition==="top"?(cov.cover(190),i.prepend(t)):(cov.cover(191),i.append(t))):(cov.cover(192),r=n.getTableRow(this.config.map,this.dataItem,this.config.node),u=r.find("td.body-cell"),f=$(t).find("td.body-cell"),u.each(function(n){cov.cover(193);$(this).empty().append(f[n])}))}};n.helpers={sortStyle:function(t){cov.cover(194);var i=$(t.node).find("a.table-sort > span.glyphicon-chevron-up,a.table-sort > span.glyphicon-chevron-down").removeClass("glyphicon-chevron-up glyphicon-chevron-down");n.isNullOrEmpty(t.pageModel.sort)||(cov.cover(195),$(t.node).find('a.table-sort[data-sort="'+t.pageModel.sort+'"] > span').addClass(t.pageModel.desc?"glyphicon-chevron-down":"glyphicon-chevron-up"))}};n.Initializer=function(n){cov.cover(196);this.parent=$(n)};n.Initializer.prototype={initialize:function(n){return cov.cover(197),this.config=this.getConfig(this.parent),this.initializeOptions(this.config,n)},initializeOptions:function(t,i){var r,f,u;return cov.cover(198),r=this,t.pageModel={},t.ID=n.createUID(),this.config=t,this.config.map=new n.DataMap,this.config.pageModel=n["implements"](this.config.read,n.PagingModel.prototype)?this.config.read:new n.PagingModel,this.config.editmode=this.config.editmode||"inline",this.config.newrowposition=this.config.newrowposition||"top",this.injector=new n.Injector({$config:this.config,$columns:this.config.columns,$node:this.config.node,$pageModel:this.config.pageModel,$map:this.config.map,$data:this.config.pageModel.data,$mode:"read"},n.templates,null,this.config),this.resolveCustomResource(this.config,this.injector),this.renderLayout(this.config,this.parent),this.config.node=this.parent.find(".table-container")[0],this.$n=this.parent.find(".table-container"),f=new n.DataLayer(this.config),u=new n.Controller(this.config,f,this.config.pageModel,this.injector),this.config.node.api=new n.api(u),this.config.hasFooter=this.resolveFooter(this.config),this.config.preload=this.config.preload===!1?this.config.preload:!0,this.injector.context=this.config.node.api,setTimeout(function(){cov.cover(199);r.resolveTopLevelOptions(r.config);r.addEventDelegates(r.config,u);u.invokeDelegates(n.events.beforeInit,r.config);r.config.preload?(cov.cover(200),u.invokeDelegates(n.events.beforeRead,r.config.pageModel),f.read(r.config.pageModel,function(t){cov.cover(201);try{n.shallowCopy(t,r.config.pageModel,!0);r.injector.setResource("$data",r.config.pageModel.data);n.resolveTypes(r.config);r.resolveCommands(r.config);r.render(r.config);u.init();typeof i=="function"&&i(r.config)}catch(f){n.error(f)}u.invokeDelegates(n.events.onRead,r.config.pageModel)},function(t){cov.cover(202);u.invokeDelegates(n.events.httpError,t);alert("An error occurred while carrying out your request.");n.error(t)})):(cov.cover(203),n.resolveTypes(r.config),r.resolveCommands(r.config),u.init())}),this.config},getConfig:function(t){cov.cover(204);var f=this,r,u,i=n.getAttributes(t),e=$(t).find("gp-column");return i.columns=[],u="header body edit footer".split(" "),e.each(function(){cov.cover(205);r=n.getAttributes(this);i.columns.push(r);f.resolveTemplates(u,r,this,"template")}),this.resolveTemplates(Object.getOwnPropertyNames(n.templates),i,t,""),i},addEventDelegates:function(t,i){cov.cover(206);var f=this,u,r,e=t.node.api;Object.getOwnPropertyNames(n.events).forEach(function(f){cov.cover(207);u=n.events[f];r=t[u];typeof r=="string"&&(cov.cover(208),r=n.getObjectAtPath(r));typeof r=="function"&&(cov.cover(209),t[u]=r,i.addDelegate(u,r))})},renderLayout:function(t,i){cov.cover(210);try{$(i).html(this.injector.exec("container"))}catch(r){n.error(r)}},render:function(t){var i,e;cov.cover(211);i=this;try{var s=t.node,r=this.$n.find("div.table-body"),u=this.$n.find("div.table-footer"),f=this.$n.find("div.table-pager");r.html(i.injector.exec("tableBody"));u.html(i.injector.exec("footerTable"));f.html(i.injector.exec("pagerBar"));n.helpers.sortStyle(t);(t.fixedheaders||t.fixedfooters)&&(cov.cover(212),e=this.$n.find(".table-body > table > tbody > tr:first-child > td"),window.addEventListener("resize",function(){cov.cover(213);i.syncColumnWidths(t)}))}catch(o){n.error(o)}},syncColumnWidths:function(){cov.cover(214);var n=this.injector.exec("columnWidthStyle");this.$n.find("style.column-width-style").html(n)},resolveFooter:function(n){cov.cover(215);for(var t=0;t<n.columns.length;t++)if(n.columns[t].footertemplate)return!0;return!1},resolveTopLevelOptions:function(t){cov.cover(216);var i,r="rowselected searchfunction read create update destroy validate model".split(" ");r.forEach(function(r){cov.cover(217);n.hasValue(t[r])&&(cov.cover(218),i=n.getObjectAtPath(t[r]),n.hasValue(i)&&(t[r]=i))})},resolveTemplates:function(t,i,r,u){cov.cover(219);var o,f,s,e=$(r),h='script[type="text/html"][data-template~="{{name}}"],template[data-template~="{{name}}"]';t.forEach(function(t){if(cov.cover(220),o=n.supplant(h,{name:t}),f=e.find(o),f.length){cov.cover(221);for(var r=0;r<e[0].children.length;r++)if(e[0].children[r]==f[0]){cov.cover(222);s=t+u;i[s]=f[0].innerHTML;return}}})},resolveCommands:function(t){cov.cover(223);var i,r;t.columns.forEach(function(t){cov.cover(224);typeof t.commands=="string"&&(cov.cover(225),r=[],t.commands.split(",").forEach(function(n){cov.cover(226);i=n.split(":");r.push({text:i[0],value:i[1],btnClass:i[2],glyphicon:i[3]})}),t.commands=r);Array.isArray(t.commands)&&(cov.cover(227),t.commands.forEach(function(t){cov.cover(228);t.text=t.text||t.value;t.value=t.value||t.text;t.btnClass=t.btnClass||(/delete|destroy/i.test(t.text)?"btn-danger":"btn-default");t.glyphicon=t.glyphicon||(/delete|destroy/i.test(t.text)?"glyphicon-remove":/edit/i.test(t.text)?"glyphicon-edit":"glyphicon-cog");t.func=t.func||n.getObjectAtPath(t.value)}))})},resolveCustomResource:function(t,i){if(cov.cover(229),t.inject&&typeof t.inject=="string"){cov.cover(230);var r=t.inject.match(n.rexp.splitPath);i.setResource(r[r.length-1],n.getObjectAtPath(t.inject))}}};n.Injector=function(n,t,i,r){cov.cover(231);this.resources=n;n.$injector=this;n.$window=window;this.root=t||window;this.context=i||this;this.overrides=r||{}};n.Injector.prototype={setResource:function(n,t){return cov.cover(232),this.resources[n]=t,this},base:function(n,t){return cov.cover(233),this.exec(n,t,!0)},exec:function(t,i,r){cov.cover(234);var u;return typeof t=="string"&&(cov.cover(235),r?(cov.cover(236),t=this.root[t]):(cov.cover(237),t=this.overrides[t]||this.root[t])),typeof t=="function"?(cov.cover(238),u=this.inject(t),n.hasValue(i)&&(cov.cover(239),u.push(i)),t.apply(this.context,u)):(cov.cover(240),n.supplant.call(this.context,t,this.resources,this.resources))},inject:function(n){cov.cover(241);var i=this,t,r=[];return n.$inject?(cov.cover(242),t=n.$inject):(cov.cover(243),t=this.getParamNames(n)),t.forEach(function(n){if(cov.cover(244),i.resources.hasOwnProperty(n))cov.cover(245),r.push(i.resources[n]);else if(n[0]==="$"){cov.cover(246);throw"Unrecognized dependency: "+n;}}),r},getParamNames:function(n){cov.cover(247);var t=n.toString().replace(/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,""),i=t.slice(t.indexOf("(")+1,t.indexOf(")")).match(/([^\s,]+)/g);return i===null&&(i=[]),i}},function(n){var t,i;cov.cover(248);n.Http=function(){};t={read:/read/i,update:/update/i,create:/create/i,destroy:/Delete/i};n.Http.prototype={post:function(r,u,f){if(cov.cover(249),u=u||{},t.read.test(r))cov.cover(250),i(u,f);else if(t.create.test(r))cov.cover(251),window.data.products.push(u),f(new n.UpdateModel(u));else if(t.update.test(r))cov.cover(252),f(new n.UpdateModel(u));else{cov.cover(253);throw"404 Not found: "+r;}},destroy:function(n,t){cov.cover(254);t({Success:!0,Message:""})}};i=function(t,i){var e,r,u,f;cov.cover(255);r=window.data.products.slice(0,window.data.length);n.isNullOrEmpty(t.search)||(cov.cover(256),u=Object.getOwnPropertyNames(r[0]),f=t.search.toLowerCase(),r=r.filter(function(n){cov.cover(257);for(var t=0;t<u.length;t++)if(n[u[t]]&&n[u[t]].toString().toLowerCase().indexOf(f)!==-1)return cov.cover(258),!0;return!1}));n.isNullOrEmpty(t.sort)||(cov.cover(259),t.desc?(cov.cover(260),r.sort(function(n,i){cov.cover(261);var u=n[t.sort],r=i[t.sort];if(u===null){if(cov.cover(262),r!=null)return cov.cover(263),1}else if(r===null)return cov.cover(264),-1;return u>r?(cov.cover(265),-1):u<r?(cov.cover(266),1):0})):(cov.cover(267),r.sort(function(n,i){cov.cover(268);var u=n[t.sort],r=i[t.sort];if(u===null){if(cov.cover(269),r!=null)return cov.cover(270),-1}else if(r===null)return cov.cover(271),1;return u>r?(cov.cover(272),1):u<r?(cov.cover(273),-1):0})));e=r.length;t.top!==-1?(cov.cover(274),t.data=r.slice(t.skip).slice(0,t.top)):(cov.cover(275),t.data=r);t.errors=[];setTimeout(function(){cov.cover(276);i(t)})}}(gridponent);n.ModelSync={rexp:{rTrue:/^true$/i,rFalse:/^false$/i},serialize:function(n){cov.cover(277);var i=$(n).find(":input[name]"),r,t={};return i.each(function(){cov.cover(278);t[this.name]=null}),r=$(i).serializeArray(),r.forEach(function(n){cov.cover(279);t[n.name]===null||Array.isArray(t[n.name])||(cov.cover(280),t[n.name]=[t[n.name]]);Array.isArray(t[n.name])?(cov.cover(281),t[n.name].push(n.value)):(cov.cover(282),t[n.name]=n.value)}),t},bindElements:function(n,t){cov.cover(283);var r=this,i;Object.getOwnPropertyNames(n).forEach(function(u){cov.cover(284);i=n[u];Array.isArray(i)?(cov.cover(285),i.forEach(function(n){cov.cover(286);r.bindElement(u,n,t)})):(cov.cover(287),r.bindElement(u,i,t))})},bindElement:function(t,i,r){var e,o,u,f;if(cov.cover(288),e=this,i=n.hasValue(i)?i.toString():"",u=$(r).find('[type=checkbox][name="'+t+'"],[type=radio][name="'+t+'"]'),u.length>0)for(cov.cover(289),o=n.escapeHTML(i),f=0;f<u.length;f++)if(u[f].value==i||u[f].value==o){cov.cover(290);u[f].checked=!0;return}if(/^(true|false)$/i.test(i)&&(cov.cover(291),u=$(r).find('[type=checkbox][name="'+t+'"][value=true],[type=checkbox][name="'+t+'"][value=false]'),u.length>0)){cov.cover(292);u.each(function(n){cov.cover(293);this.checked=e.rexp.rTrue.test(i)&&e.rexp.rTrue.test(n.value)||e.rexp.rFalse.test(i)&&e.rexp.rFalse.test(n.value)});return}u=$(r).find('[name="'+t+'"]');u.length>0&&(cov.cover(294),u[0].value!==undefined?(cov.cover(295),u.val(i)):u[0].innerHTML!==undefined&&(cov.cover(296),u.html(i==null?"":n.escapeHTML(i))))},castValues:function(t,i){cov.cover(297);var r;Object.getOwnPropertyNames(t).forEach(function(u){cov.cover(298);r=n.getColumnByField(i,u);r&&r.Type&&(cov.cover(299),t[u]=this.cast(t[u],r.Type))}.bind(this))},cast:function(n,t){cov.cover(300);switch(t){case"number":if(cov.cover(301),$.isNumeric(n))return parseFloat(n);break;case"boolean":return cov.cover(302),n!=null&&n.toLowerCase()=="true";case null:cov.cover(303);case undefined:return(cov.cover(304),/true|false/i.test(n))?(cov.cover(305),n!=null&&n.toLowerCase()=="true"):n===""?null:n;default:return cov.cover(306),n===""?null:n}}};n.ServerPager=function(n){cov.cover(307);this.url=n};n.ServerPager.prototype={read:function(t,i,r){cov.cover(308);var u=n.shallowCopy(t),o=Object.getOwnPropertyNames(u).forEach(function(n){cov.cover(309);/^(page|top|sort|desc|search)$/i.test(n)==!1&&(cov.cover(310),delete u[n])}),f=n.supplant(this.url,t,t),e=new n.Http;e.post(f,u,i,r)}};n.ClientPager=function(t){cov.cover(311);var i,r=this;this.data=t.pageModel.data;this.columns=t.columns.filter(function(n){return cov.cover(312),n.field!==undefined||n.sort!==undefined});typeof t.searchfunction=="function"?(cov.cover(313),this.searchFilter=t.searchfunction):(cov.cover(314),this.searchFilter=function(t,u){var e,f;for(cov.cover(315),e=u.toLowerCase(),f=0;f<r.columns.length;f++)if(i=n.getFormattedValue(t,r.columns[f],!1),n.hasValue(i)&&i.toString().toLowerCase().indexOf(e)!==-1)return cov.cover(316),!0;return!1})};n.ClientPager.prototype={read:function(t,i){var u,f,e,r,o;cov.cover(317);try{u=this;e=this.getSkip(t);t.data=this.data.slice(0,this.data.length);n.isNullOrEmpty(t.search)||(cov.cover(318),f=$.trim(t.search.toString()),t.data=t.data.filter(function(n){return cov.cover(319),u.searchFilter(n,f)}));t.totalrows=t.data.length;t.pagecount=this.getPageCount(t);n.isNullOrEmpty(t.sort)===!1&&(cov.cover(320),r=n.getColumnByField(this.columns,t.sort),n.hasValue(r)&&(cov.cover(321),o=this.getSortFunction(r,t.desc),t.data.sort(function(n,i){return cov.cover(322),o(n[t.sort],i[t.sort])})));t.top!==-1&&(cov.cover(323),t.data=t.data.slice(e).slice(0,t.top))}catch(s){n.error(s)}i(t)},getSkip:function(n){cov.cover(324);var t=n;if(t.pagecount==0)return cov.cover(325),0;if(t.page<1)cov.cover(326),t.page=1;else if(t.page>t.pagecount)return cov.cover(327),t.page=t.pagecount;return(t.page-1)*t.top},getPageCount:function(n){return(cov.cover(328),n.top>0)?(cov.cover(329),Math.ceil(n.totalrows/n.top)):n.totalrows===0?0:1},getSortFunction:function(n,t){return cov.cover(330),/^(number|date|boolean)$/.test(n.Type)?(cov.cover(331),t)?(cov.cover(332),this.diffSortDesc):this.diffSortAsc:(cov.cover(333),t)?(cov.cover(334),this.stringSortDesc):this.stringSortAsc},diffSortDesc:function(n,t){return cov.cover(335),t-n},diffSortAsc:function(n,t){return cov.cover(336),n-t},stringSortDesc:function(t,i){return(cov.cover(337),n.hasValue(t)===!1)?(cov.cover(338),n.hasValue(i))?(cov.cover(339),1):0:n.hasValue(i)===!1?(cov.cover(340),-1):t.toString().toLowerCase()>i.toString().toLowerCase()?(cov.cover(341),-1):t.toString().toLowerCase()<i.toString().toLowerCase()?(cov.cover(342),1):0},stringSortAsc:function(t,i){return(cov.cover(343),n.hasValue(t)===!1)?(cov.cover(344),n.hasValue(i))?(cov.cover(345),-1):0:n.hasValue(i)===!1?(cov.cover(346),1):t.toString().toLowerCase()>i.toString().toLowerCase()?(cov.cover(347),1):t.toString().toLowerCase()<i.toString().toLowerCase()?(cov.cover(348),-1):0}};n.FunctionPager=function(n){cov.cover(349);this.config=n};n.FunctionPager.prototype={read:function(t,i,r){cov.cover(350);try{var e=this,u=this.config.read(t,i.bind(this));n.hasValue(u)&&(cov.cover(351),i(u))}catch(f){typeof r=="function"?(cov.cover(352),n.applyFunc(r,this,f)):(cov.cover(353),n.applyFunc(i,this,this.config));n.error(f)}}};n.PagingModel=function(n){cov.cover(354);var t=this;this.top=-1;this.page=1;this.sort="";this.desc=!1;this.search="";this.data=n||[];this.totalrows=n!=undefined&&n.length?n.length:0;this.pagecount=0;Object.defineProperty(t,"pageindex",{get:function(){return cov.cover(355),t.page-1}});Object.defineProperty(t,"skip",{get:function(){if(cov.cover(356),t.top!==-1){if(cov.cover(357),t.pagecount===0)return 0;if(t.page<1)t.page=1;else if(t.page>t.pagecount)return t.page=t.pagecount;return t.pageindex*t.top}return 0}})};n.PagingModel.prototype={top:-1,page:1,sort:"",desc:!1,search:"",data:data||[],totalrows:0,pagecount:0};n.StringBuilder=function(){cov.cover(358);this.out=[]};n.StringBuilder.prototype={add:function(n){return cov.cover(359),this.out.push(n),this},escape:function(t){return cov.cover(360),this.out.push(n.escapeHTML(t)),this},toString:function(){return cov.cover(361),this.out.join("")}};n.templates=n.templates||{};n.templates.bodyCellContent=function(t,i,r){cov.cover(362);var o=this,f,e=(t.Type||"").toLowerCase(),u=new n.StringBuilder;if(i!=null)return f=n.getFormattedValue(i,t,!0),t.bodytemplate?(cov.cover(363),typeof t.bodytemplate=="function"?(cov.cover(364),u.add(n.applyFunc(t.bodytemplate,this,[i,t]))):(cov.cover(365),u.add(n.supplant.call(this,t.bodytemplate,i,[i,t])))):t.commands&&t.commands.length?(cov.cover(366),u.add('<div class="btn-group btn-group-xs" role="group">'),t.commands.forEach(function(n){cov.cover(367);u.add(r.exec("button",n))}),u.add("<\/div>")):n.hasValue(f)&&(cov.cover(368),e==="boolean"?(cov.cover(369),f===!0&&(cov.cover(370),u.add('<span class="glyphicon glyphicon-ok"><\/span>'))):(cov.cover(371),u.add(f))),u.toString()};n.templates.bodyCellContent.$inject=["$column","$dataItem","$injector"];n.templates.bootstrapModal=function(t,i,r,u){var f,e;return cov.cover(372),f={title:u=="create"?"Add":"Edit",body:r.exec("bootstrapModalBody"),footer:r.exec("bootstrapModalFooter"),uid:t.map.getUid(i)},f.footer=f.footer||'<div class="btn-group"><button type="button" class="btn btn-default" value="cancel"><span class="glyphicon glyphicon-remove"><\/span>Close<\/button><button type="button" class="btn btn-primary" value="save"><span class="glyphicon glyphicon-save"><\/span>Save changes<\/button><\/div>',e=new n.StringBuilder,e.add('<div class="modal fade" tabindex="-1" role="dialog" data-uid="{{uid}}">').add('<div class="modal-dialog" role="document">').add('<div class="modal-content">').add('<div class="modal-header">').add('<button type="button" class="close" aria-label="Close" value="cancel"><span aria-hidden="true">&times;<\/span><\/button>').add('<h4 class="modal-title">{{title}}<\/h4>').add("<\/div>").add('<div class="modal-body">{{{body}}}<\/div>').add('<div class="modal-footer">{{{footer}}}<\/div>').add("<\/div>").add('<div class="gp-progress-overlay">').add('<div class="gp-progress gp-progress-container">').add('<div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><\/div>').add("<\/div>").add("<\/div>").add("<\/div>").add("<\/div>"),n.supplant.call(this,e.toString(),f)};n.templates.bootstrapModal.$inject=["$config","$dataItem","$injector","$mode"];n.templates.bootstrapModalBody=function(t,i){cov.cover(373);var u=this,r=new n.StringBuilder;return r.add('<div class="form-horizontal">'),t.columns.forEach(function(t){var e,f;(cov.cover(374),i.setResource("$column",t),e=!t.readonly&&(n.hasValue(t.field)||n.hasValue(t.edittemplate)),e)&&(f={label:null,input:i.exec("editCellContent"),editclass:t.editclass},t.headertemplate?(cov.cover(375),typeof t.headertemplate=="function"?(cov.cover(376),f.label=n.applyFunc(t.headertemplate,u,[t])):(cov.cover(377),f.label=n.supplant.call(u,t.headertemplate,[t]))):(cov.cover(378),f.label=n.escapeHTML(n.coalesce([t.header,t.field,""]))),r.add(i.exec("formGroup",f)))}),r.add("<\/div>"),r.toString()};n.templates.bootstrapModalBody.$inject=["$config","$injector"];n.templates.bootstrapModalFooter=function(n,t){cov.cover(379);var i=n.filter(function(n){return cov.cover(380),n.commands});return i?(cov.cover(381),t.setResource("$column",i),t.exec("editCellContent")):""};n.templates.bootstrapModalFooter.$inject=["$columns","$injector"];n.templates.button=function(t){cov.cover(382);return n.supplant.call(this,'<button type="button" class="btn {{btnClass}}" value="{{value}}"><span class="glyphicon {{glyphicon}}"><\/span>{{text}}<\/button>',t)};n.templates.columnWidthStyle=function(t,i){cov.cover(383);var u=new n.StringBuilder,e,r=0,f=document.querySelectorAll("#"+t.ID+" .table-body > table > tbody > tr:first-child > td");return i.forEach(function(n){cov.cover(384);n.width?(cov.cover(385),u.add("#"+t.ID+" .table-header th.header-cell:nth-child("+(r+1)+"),").add("#"+t.ID+" .table-footer td.footer-cell:nth-child("+(r+1)+")").add(",").add("#"+t.ID+" > .table-body > table > thead th:nth-child("+(r+1)+"),").add("#"+t.ID+" > .table-body > table > tbody td:nth-child("+(r+1)+")").add("{ width:").add(n.width),isNaN(n.width)==!1&&u.add("px"),u.add(";}")):f.length&&(t.fixedheaders||t.fixedfooters)&&(cov.cover(386),e=f[r].offsetWidth,u.add("#"+t.ID+" .table-header th.header-cell:nth-child("+(r+1)+"),").add("#"+t.ID+" .table-footer td.footer-cell:nth-child("+(r+1)+")").add("{ width:").add(f[r].offsetWidth).add("px;}"));r++}),u.toString()};n.templates.columnWidthStyle.$inject=["$config","$columns"];n.templates.container=function(t,i){cov.cover(387);var r=new n.StringBuilder;return r.add('<div class="gp table-container ').add(i.exec("containerClasses")).add('" id="').add(t.ID).add('">'),(t.search||t.create||t.toolbar)&&(cov.cover(388),r.add('<div class="table-toolbar">'),r.add(i.exec("toolbar")),r.add("<\/div>")),t.fixedheaders&&(cov.cover(389),r.add('<div class="table-header">').add('<table class="table" cellpadding="0" cellspacing="0">').add(i.exec("header")).add("<\/table>").add("<\/div>")),r.add('<div class="table-body '),t.fixedheaders&&(cov.cover(390),r.add("table-scroll")),r.add('">').add('<table class="table" cellpadding="0" cellspacing="0"><tbody><\/tbody><\/table>').add("<\/div>"),t.fixedfooters&&(cov.cover(391),r.add('<div class="table-footer"><\/div>')),t.pager&&(cov.cover(392),r.add('<div class="table-pager"><\/div>')),r.add('<style type="text/css" class="column-width-style">').add(i.exec("columnWidthStyle")).add("<\/style>").add('<div class="gp-progress-overlay">').add('<div class="gp-progress gp-progress-container">').add('<div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><\/div>').add("<\/div>").add("<\/div>").add("<\/div>"),r.toString()};n.templates.container.$inject=["$config","$injector"];n.templates.containerClasses=function(n){cov.cover(393);var t=[];return n.fixedheaders&&(cov.cover(394),t.push("fixed-headers")),n.fixedfooters&&(cov.cover(395),t.push("fixed-footers")),n.pager&&(cov.cover(396),t.push("pager-"+n.pager)),n.responsive&&(cov.cover(397),t.push("table-responsive")),n.search&&(cov.cover(398),t.push("search-"+n.search)),n.rowselected&&(cov.cover(399),t.push("selectable")),n.containerclass&&(cov.cover(400),t.push(n.containerclass)),t.join(" ")};n.templates.containerClasses.$inject=["$config"];n.templates.editCellContent=function(t,i,r,u,f){var e,o,s;return cov.cover(401),e=t,o=new n.StringBuilder,e.edittemplate?(cov.cover(402),typeof e.edittemplate=="function"?(cov.cover(403),o.add(n.applyFunc(e.edittemplate,this,[i,e]))):(cov.cover(404),o.add(n.supplant.call(this,e.edittemplate,i,[i,e])))):e.commands?(cov.cover(405),o.add('<div class="btn-group').add(u.editmode=="inline"?" btn-group-xs":"").add('">').add(f.exec("button",{btnClass:"btn-primary",value:r=="create"?"create":"update",glyphicon:"glyphicon-save",text:"Save"})).add('<button type="button" class="btn btn-default" data-dismiss="modal" value="cancel">').add('<span class="glyphicon glyphicon-remove"><\/span>Cancel').add("<\/button>").add("<\/div>")):(cov.cover(406),s=i[e.field],n.hasValue(s)||(s=""),o.add(f.exec("input",{type:e.Type,name:e.field,value:"",required:t.required||!1}))),o.toString()};n.templates.editCellContent.$inject=["$column","$dataItem","$mode","$config","$injector"];n.templates.footer=function(t,i){cov.cover(407);var u=this,r=new n.StringBuilder;return r.add("<tfoot>").add("<tr>"),t.forEach(function(n){cov.cover(408);i.setResource("$column",n);r.add(i.exec("footerCell"))}),r.add("<\/tr>").add("<\/tfoot>"),r.toString()};n.templates.footer.$inject=["$columns","$injector"];n.templates.footerCell=function(t){cov.cover(409);var i=new n.StringBuilder;return i.add('<td class="footer-cell">').add(t.exec("footerCellContent")).add("<\/td>"),i.toString()};n.templates.footerCell.$inject=["$injector"];n.templates.footerCellContent=function(t,i){cov.cover(410);var r=new n.StringBuilder;return i.footertemplate&&(cov.cover(411),typeof i.footertemplate=="function"?(cov.cover(412),r.add(n.applyFunc(i.footertemplate,this,[i,t]))):(cov.cover(413),r.add(n.supplant.call(this,i.footertemplate,i,[i,t])))),r.toString()};n.templates.footerCellContent.$inject=["$data","$column"];n.templates.footerTable=function(t){cov.cover(414);var i=new n.StringBuilder;return i.add('<table class="table" cellpadding="0" cellspacing="0">').add(t.exec("footer")).add("<\/table>"),i.toString()};n.templates.footerTable.$inject=["$injector"];n.templates.formGroup=function(t){cov.cover(415);return n.supplant.call(this,'<div class="form-group {{editclass}}"><label class="col-sm-4 control-label">{{{label}}}<\/label><div class="col-sm-6">{{{input}}}<\/div><\/div>',t)};n.templates.header=function(t,i,r){cov.cover(416);var u=new n.StringBuilder;return u.add("<thead><tr>"),t.forEach(function(n){cov.cover(417);u.add(r.setResource("$column",n).exec("headerCell"))}),u.add("<\/tr><\/thead>"),u.toString()};n.templates.header.$inject=["$columns","$config","$injector"];n.templates.headerCell=function(t,i,r){cov.cover(418);var e=this,u=new n.StringBuilder,f="";return i.sorting?(cov.cover(419),f=n.escapeHTML(n.coalesce([t.sort,t.field]))):(cov.cover(420),n.hasValue(t.sort)&&(cov.cover(421),f=n.escapeHTML(t.sort))),u.add('<th class="header-cell '+(t.headerclass||"")+'"'),n.hasValue(f)&&(cov.cover(422),u.add(' data-sort="'+f+'"')),u.add(">"),u.add(r.exec("headerCellContent")),u.add("<\/th>"),u.toString()};n.templates.headerCell.$inject=["$column","$config","$injector"];n.templates.headerCellContent=function(t,i){cov.cover(423);var f=this,r=new n.StringBuilder,u="";return i.sorting?(cov.cover(424),u=n.escapeHTML(n.coalesce([t.sort,t.field]))):(cov.cover(425),n.hasValue(t.sort)&&(cov.cover(426),u=n.escapeHTML(t.sort))),t.headertemplate?(cov.cover(427),typeof t.headertemplate=="function"?(cov.cover(428),r.add(n.applyFunc(t.headertemplate,f,[t]))):(cov.cover(429),r.add(n.supplant.call(f,t.headertemplate,t,[t])))):n.isNullOrEmpty(u)?(cov.cover(431),r.escape(n.coalesce([t.header,t.field,""]))):(cov.cover(430),r.add('<a href="javascript:void(0);" class="table-sort" value="sort" data-sort="').escape(u).add('">').escape(n.coalesce([t.header,t.field,u])).add('<span class="glyphicon"><\/span>').add("<\/a>")),r.toString()};n.templates.headerCellContent.$inject=["$column","$config"];n.templates.input=function(t){cov.cover(432);var r={type:t.type=="boolean"?"checkbox":t.type=="number"?"number":"text",name:t.name,value:t.type=="boolean"?"true":t.type=="date"?n.format(t.value,"YYYY-MM-DD"):n.escapeHTML(t.value),checked:t.type=="boolean"&&t.value?" checked":"",dataType:/^date/.test(t.type)?' data-type="date"':"",required:t.required?" required":""},i=n.supplant.call(this,'<input type="{{type}}" name="{{name}}" value="{{value}}" class="form-control"{{{dataType}}}{{checked}}{{required}} />',r);return t.required&&(cov.cover(433),i+='<span class="required"><\/span>'),i};n.templates.pagerBar=function(t){cov.cover(434);var i=n.shallowCopy(t),r=new n.StringBuilder;return i.IsFirstPage=i.page===1,i.IsLastPage=i.page===i.pagecount,i.HasPages=i.pagecount>1,i.PreviousPage=i.page===1?1:i.page-1,i.NextPage=i.page===i.pagecount?i.pagecount:i.page+1,i.firstPageClass=i.IsFirstPage?"disabled":"",i.lastPageClass=i.IsLastPage?"disabled":"",i.HasPages&&(cov.cover(435),r.add('<div class="btn-group">').add('<button class="ms-page-index btn btn-default {{firstPageClass}}" title="First page" value="page" data-page="1">').add('<span class="glyphicon glyphicon-triangle-left" aria-hidden="true"><\/span>').add("<\/button>").add('<button class="ms-page-index btn btn-default {{firstPageClass}}" title="Previous page" value="page" data-page="{{PreviousPage}}">').add('<span class="glyphicon glyphicon-menu-left" aria-hidden="true"><\/span>').add("<\/button>").add("<\/div>").add('<input type="number" name="page" value="{{page}}" class="form-control" style="width:75px;display:inline-block;vertical-align:middle" />').add('<span class="page-count"> of {{pagecount}}<\/span>').add('<div class="btn-group">').add('<button class="ms-page-index btn btn-default {{lastPageClass}}" title="Next page" value="page" data-page="{{NextPage}}">').add('<span class="glyphicon glyphicon-menu-right" aria-hidden="true"><\/span>').add("<\/button>").add('<button class="ms-page-index btn btn-default {{lastPageClass}}" title="Last page" value="page" data-page="{{pagecount}}">').add('<span class="glyphicon glyphicon-triangle-right" aria-hidden="true"><\/span>').add("<\/button>").add("<\/div>")),n.supplant.call(this,r.toString(),i)};n.templates.pagerBar.$inject=["$pageModel"];n.templates.tableBody=function(t,i){cov.cover(436);var r=new n.StringBuilder;return r.add('<table class="table" cellpadding="0" cellspacing="0">'),t.fixedheaders||(cov.cover(437),r.add(i.exec("header"))),r.add("<tbody>").add(i.exec("tableRows")).add("<\/tbody>"),t.hasFooter&&!t.fixedfooters&&(cov.cover(438),r.add(i.exec("footer"))),r.add("<\/table>"),r.toString()};n.templates.tableBody.$inject=["$config","$injector"];n.templates.tableRow=function(t,i,r){cov.cover(439);var f=this,u=new n.StringBuilder;return u.add('<tr data-uid="').add(r).add('"'),/create|update/.test(i)&&(cov.cover(440),u.add(' class="').add(i).add('-mode"')),u.add(">").add(t.exec("tableRowCells")).add("<\/tr>"),u.toString()};n.templates.tableRow.$inject=["$injector","$mode"];n.templates.tableRowCell=function(t,i,r){cov.cover(441);var e=this,f=r||"read",u=new n.StringBuilder;return u.add('<td class="body-cell '),t.commands&&(cov.cover(442),u.add("commands ")),u.add(t.bodyclass).add('">'),/create|update/.test(f)&&!t.readonly?(cov.cover(443),u.add(i.exec("editCellContent"))):(cov.cover(444),u.add(i.exec("bodyCellContent"))),u.add("<\/td>"),u.toString()};n.templates.tableRowCell.$inject=["$column","$injector","$mode"];n.templates.tableRowCells=function(t,i){cov.cover(445);var u=this,r=new n.StringBuilder;return t.forEach(function(n){cov.cover(446);i.setResource("$column",n);r.add(i.exec("tableRowCell"))}),r.toString()};n.templates.tableRowCells.$inject=["$columns","$injector"];n.templates.tableRows=function(t,i,r){cov.cover(447);var e=this,u=new n.StringBuilder,f;return(i||(cov.cover(448),i=new n.DataMap,r.setResource("$map",i)),t==null)?"":(t.forEach(function(n){cov.cover(449);r.setResource("$dataItem",n);f=i.assign(n);u.add(r.exec("tableRow",f))}),u.toString())};n.templates.tableRows.$inject=["$data","$map","$injector"];n.templates.toolbar=function(t,i){cov.cover(450);var r=new n.StringBuilder;return t.search&&(cov.cover(451),r.add('<div class="input-group gridponent-searchbox">').add('<input type="text" name="search" class="form-control" placeholder="Search...">').add('<span class="input-group-btn">').add(i.exec("button",{btnClass:"btn-default",value:"search",glyphicon:"glyphicon-search"})).add("<\/span>").add("<\/div>")),t.create&&(cov.cover(452),r.add(i.exec("button",{btnClass:"btn-default",value:"AddRow",glyphicon:"glyphicon-plus",text:"Add"}))),r.toString()};n.templates.toolbar.$inject=["$config","$injector"];n.UpdateModel=function(t,i){cov.cover(453);this.dataItem=t;this.errors=i;this.original=n.shallowCopy(t)},function(n){var u,f;cov.cover(454);n.applyFunc=function(t,i,r,u){if(cov.cover(455),typeof t=="function")try{return r==undefined?(cov.cover(456),t.call(i)):(cov.cover(457),r=Array.isArray(r)?r:[r],t.apply(i,r))}catch(f){u=u||n.error;n.applyFunc(u,i,f)}};n.coalesce=function(t){if(cov.cover(458),n.isNullOrEmpty(t))return t;for(var i=0;i<t.length;i++)if(n.hasValue(t[i]))return cov.cover(459),t[i];return t[t.length-1]};var t=Function.prototype,i=t.bind?t.bind.bind(t.call):function(n){return cov.cover(460),function(t){return cov.cover(461),function(){return cov.cover(462),n.apply(t,arguments)}}}(t.call),r={},e=i("".slice),o=i(0..toString);n.createUID=function(){cov.cover(463);var n="gp"+e(o(Math.random(),36),2);return n in r?createUID():r[n]=n};n.disable=function(t,i){cov.cover(464);$(t).attr("disabled","disabled").addClass("disabled busy");typeof i=="number"&&i>0&&(cov.cover(465),setTimeout(function(){cov.cover(466);n.enable(t)},i*1e3))};n.enable=function(n){cov.cover(467);$(n).removeAttr("disabled").removeClass("disabled busy")};u=[/&/g,/</g,/>/g,/"/g,/'/g,/`/g];f=["&amp;","&lt;","&gt;","&quot;","&apos;","&#96;"];n.escapeHTML=function(n){return(cov.cover(468),typeof n!="string")?(cov.cover(469),n):(u.forEach(function(t,i){cov.cover(470);n=n.replace(t,f[i])}),n)};n.format=function(t,i){cov.cover(471);var r=n.getType(t);try{if(/^(date|datestring)$/.test(r))return(cov.cover(472),!window.moment)?t:(i=i||"M/D/YYYY h:mm a",moment(t).format(i));if(r==="timestamp")return(cov.cover(473),!window.moment)?t:(i=i||"M/D/YYYY h:mm a",t=parseInt(t.match(n.rexp.timestamp)[1]),moment(t).format(i));if(r==="number")return(cov.cover(474),!window.numeral)?t:(i=i||"0,0",numeral(t).format(i))}catch(u){n.error(u)}return t};n.getAttributes=function(t){var u,e,i,f,r;for(cov.cover(475),u={},f=$(t)[0].attributes,r=f.length-1;r>=0;r--)i=f[r],e=i.name.toLowerCase().replace("-",""),u[e]=n.rexp.trueFalse.test(i.value)||i.value===""?i.value==="true"||i.value==="":i.value;return u};n.getColumnByField=function(n,t){cov.cover(476);var i=n.filter(function(n){return n.field===t||n.sort===t});return i.length?i[0]:null};n.getCommand=function(n,t){var i,r;return cov.cover(477),i=[],n.forEach(function(n){cov.cover(478);Array.isArray(n.commands)&&(cov.cover(479),i=i.concat(n.commands))}),r=i.filter(function(n){return cov.cover(480),n.value===t}),r.length>0?r[0]:void 0};n.getDefaultValue=function(n){cov.cover(481);switch(n){case"number":return cov.cover(482),0;case"boolean":return cov.cover(483),!1;case"date":cov.cover(484);default:return cov.cover(485),null}};n.getFormattedValue=function(t,i,r){cov.cover(486);var f=(i.Type||"").toLowerCase(),u=f==="function"?i.field(t):t[i.field];return/^(date|datestring|timestamp)$/.test(f)?(cov.cover(487),n.format(u,i.format)):/^(number|function)$/.test(f)&&i.format?(cov.cover(488),n.format(u,i.format)):f===""&&i.format&&/^(?:\d*\.)?\d+$/.test(u)?(cov.cover(489),n.format(parseFloat(u),i.format)):f==="string"&&r?(cov.cover(490),n.escapeHTML(u)):u};n.getObjectAtPath=function(t,i){var u,r,f;if(cov.cover(491),typeof t!="string")return t;for(u=i||window,t=t.match(n.rexp.splitPath),t[0]==="window"&&(t=t.splice(1)),f=0;f<t.length;f++)if(r=t[f],n.rexp.indexer.test(r)?(cov.cover(492),r=parseInt(/\d+/.exec(r))):n.rexp.quoted.test(r)&&(cov.cover(493),r=r.slice(1,-1)),u=u[r],u===undefined)return;return u};n.getTableRow=function(n,t,i){cov.cover(494);var r=n.getUid(t);if(r!=-1)return $(i).find('tr[data-uid="'+r+'"]')};n.getType=function(t){if(cov.cover(495),t===null||t===undefined)return cov.cover(496),t;if(t instanceof Date)return cov.cover(497),"date";if(typeof t=="string"){if(cov.cover(498),n.rexp.iso8601.test(t))return cov.cover(499),"datestring";if(n.rexp.timestamp.test(t))return cov.cover(500),"timestamp"}return Array.isArray(t)?(cov.cover(501),"array"):typeof t};n.hasValue=function(n){return cov.cover(502),n!==undefined&&n!==null};n["implements"]=function(t,i){var r;if(cov.cover(503),typeof t!=typeof i)return!1;if(!n.hasValue(t))return!0;var e=function(n){return cov.cover(504),n.toLowerCase()},u=Object.getOwnPropertyNames(t).map(e),f=Object.getOwnPropertyNames(i).map(e);if(u.length<f.length){for(cov.cover(505),r=0;r<u.length;r++)if(f.indexOf(u[r])===-1)return!1}else for(cov.cover(506),r=0;r<f.length;r++)if(u.indexOf(f[r])===-1)return!1;return!0};n.isNullOrEmpty=function(t){return cov.cover(507),n.hasValue(t)===!1||t.length!=undefined&&t.length===0};n.resolveTypes=function(t){cov.cover(508);var i,r,u=t&&t.pageModel&&t.pageModel.data&&t.pageModel.data.length;t.columns.forEach(function(f){if((cov.cover(509),!n.hasValue(f.Type))&&(i=n.hasValue(f.field)?f.field:f.sort,!n.isNullOrEmpty(i))){if(typeof i=="function"){cov.cover(510);f.Type="function";return}if(t.model&&(cov.cover(511),n.hasValue(t.model[i])&&n.getType(t.model[i])!=="function"&&(cov.cover(512),f.Type=n.getType(t.model[i]))),!n.hasValue(f.Type)&&u){cov.cover(513);for(var e=0;e<t.pageModel.data.length&&e<25;e++)if(r=t.pageModel.data[e][i],r!==null){cov.cover(514);f.Type=n.getType(r);break}}}})};n.rexp={splitPath:/[^\[\]\.\s]+|\[\d+\]/g,indexer:/\[\d+\]/,iso8601:/^[012][0-9]{3}-[01][0-9]-[0123][0-9]/,timestamp:/\/Date\((\d+)\)\//,quoted:/^['"].+['"]$/,trueFalse:/true|false/i,json:/^\{.*\}$|^\[.*\]$/,copyable:/^(object|date|array|function)$/};n.getMatchCI=function(t,i){var u,r;if((cov.cover(515),n.isNullOrEmpty(t))||!n.hasValue(i))return null;for(u=i.toLowerCase(),r=0;r<t.length;r++)if(n.hasValue(t[r])&&t[r].toLowerCase()===u)return t[r];return null};n.shallowCopy=function(t,i,r){if(cov.cover(516),i=i||{},!n.rexp.copyable.test(n.getType(t)))return i;var f,u,e=Object.getOwnPropertyNames(t),o=Object.getOwnPropertyNames(i);return e.forEach(function(e){(cov.cover(517),u=r?n.getMatchCI(o,e)||e:e,!i.hasOwnProperty(e)||(cov.cover(518),f=Object.getOwnPropertyDescriptor(i,e),f.writable))&&(typeof t[e]=="function"?(cov.cover(519),i[u]=t[e]()):(cov.cover(520),i[u]=t[e]))}),i};n.supplant=function(t,i,r){cov.cover(521);var f=this,e=/^(string|number|boolean)$/,u;return t=t.replace(/{{{([^{}]*)}}}/g,function(t,o){return(cov.cover(522),u=n.getObjectAtPath(o,i),e.test(typeof u))?u:typeof u=="function"?n.applyFunc(u,f,r):(u=n.getObjectAtPath(o),typeof u=="function"?n.applyFunc(u,f,r):"")}),t.replace(/{{([^{}]*)}}/g,function(t,o){return(cov.cover(523),u=n.getObjectAtPath(o,i),e.test(typeof u))?n.escapeHTML(u):typeof u=="function"?n.escapeHTML(n.applyFunc(u,f,r)):(u=n.getObjectAtPath(o),typeof u=="function"?n.escapeHTML(n.applyFunc(u,f,r)):"")})};n.log=window.console?window.console.log.bind(window.console):function(){};n.error=function(n){cov.cover(524);console&&console.error&&(cov.cover(525),console.error(n))}}(gridponent);document.registerElement?(cov.cover(526),n.Gridponent=Object.create(HTMLElement.prototype),n.Gridponent.createdCallback=function(){cov.cover(527);var t=new n.Initializer(this);$(t.initialize.bind(t))},n.Gridponent.detachedCallback=function(){cov.cover(528);var n=this.querySelector(".table-container");n&&n.api&&n.api.dispose()},document.registerElement("grid-ponent",{prototype:n.Gridponent})):(cov.cover(529),n.initialize=function(t){var r,i;for(cov.cover(530),t=$(t||document)[0],r=t.querySelectorAll("grid-ponent"),i=0;i<r.length;i++)new n.Initializer(r[i]).initialize()},$(function(){cov.cover(531);n.initialize()}))}(gridponent);cov.maxCoverage=531;